---
title: Setting Up Your Project
layout: default
---

# Quick Links
1. [Homepage](./tutorial.md)
2. [Basic Overview](./tutorial.md)
3. [Project Strucure](./projectStructure.md)
4. Project Setup *(current)*
5. [Practice](./practice.md)
6. [Homepage](./index.md)
7. [Proposal](./proposal.md)

---

## Creating the Shared Module

If your existing Android app doesn’t already include a shared module, you’ll need to create one.

1. In Android Studio:  
   **File → New → New Module → Kotlin Multiplatform Library**

2. Edit the `shared/build.gradle.kts` file if it doesn’t exist (create it if necessary):

```plugins {
    kotlin("multiplatform")
    id("com.android.library")
}

kotlin {
    androidTarget()
    iosX64()
    iosArm64()
    iosSimulatorArm64()

    sourceSets {
        val commonMain by getting
        val androidMain by getting
        val iosMain by creating {
            dependsOn(commonMain)
        }
    }
}

android {
    namespace = "org.example.shared"
    compileSdk = 34
    defaultConfig {
        minSdk = 24
    }
}

```

This would configure the shared module, whilst setting up Android *and* iOS as the target platforms.

---

## Writing Shared & Platform Specific Code

The goal is to move or write code that’s not dependent on any single platform into `commonMain`.

![SharedCodePlatforms](./screenshots/SharedCodePlatforms.png)

Examples of shared code include:
- Business rules and validation
- Helper functions
- Data models

### Example: Using `expect` / `actual`

KMP uses the `expect` and `actual` keywords to handle platform-specific differences:

```kotlin
// commonMain
expect fun getPlatformName(): String

// androidMain
actual fun getPlatformName(): String = "Android"

// iosMain
actual fun getPlatformName(): String = "iOS"
```

---

This allows you to define different behavior based on the platform while keeping the function name consistent in the shared code.

## Integrating Shared Code into Apps

### Android App

Add a dependency to the `shared` module in your `androidApp/build.gradle.kts`:

```kotlin
dependencies {
    implementation(project(":shared"))
}
```

Once this is done, you are able to directly call shared functions from your Android code by doing so:

```kotlin
val platformName = getPlatformName()
Log.d("App", "Running on $platformName")
```

### iOS App
**This is where you would need Mac access**
In your iOS project (usually Swift or SwiftUI), import the shared Kotlin framework.

In Xcode:
1. Open your `.xcworkspace`
2. Go to **Build Phases → Link Binary With Libraries**
3. Add the `shared.framework` generated by Gradle (located under `shared/build/bin/ios*/releaseFramework`)

Then you can call shared functions like:

```swift
import Shared

let platformName = SharedKt.getPlatformName()
print("Running on \(platformName)")
```

---

## Testing and Debugging Shared Code

KMP supports unit testing directly within `src/commonTest/kotlin/`

```kotlin
import kotlin.test.Test
import kotlin.test.assertEquals

class SampleTest {
    @Test
        fun testPlatformNameIsNotEmpty() {
        assertTrue(getPlatformName().isNotEmpty())
    }
}
```

Run these tests via Android Studio’s Gradle panel (`shared → verification → test`).

---

Now, try it for yourself on the next page for some practice problems.

[<- Back to Project Structure}](./practice.md)

[<- Back to Home](./index.md)

## Additional Resources

- [Official Kotlin Multiplatform Docs](https://kotlinlang.org/docs/multiplatform.html)
- [Compose Multiplatform Overview](https://www.jetbrains.com/lp/compose-multiplatform/)
- [KMP Sample Projects on GitHub](https://github.com/Kotlin/multiplatform-samples)
- [KMP Hierarchal Structure on Jetbrains](https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-hierarchy.html#default-hierarchy-template)

---